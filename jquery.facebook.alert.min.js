function fbalert(e,t,n,r){var i=$("#fbalert");if(!i.size()){i=$('<div id="fbalert"><div id="fbalert-header" /><div id="fbalert-content"><div id="fbalert-body" /><div id="fbalert-footer" /></div></div>').appendTo($("body"))}if(e instanceof $){$("#fbalert-body").html("").css("padding","0").append(e)}else{$("#fbalert-body").html(e).removeAttr("style")}$("#fbalert-header").text(n?n:document.title);var s=$("#fbalert-footer").html("");if(r){var o=[];for(var u in r){o.unshift(u)}for(var u in o){var a=o[u];var f=$(document.createElement("div")).attr("id","fbalert-"+a).addClass("fbalert-button");if("type"in r[a]&&r[a]["type"]&&r[a]["type"]!="normal"){f.addClass("fbalert-button-"+r[a]["type"])}if("callback"in r[a]&&r[a]["callback"]){f.click(function(e,t){return function(){e["callback"]($(t).attr("id").replace("fbalert-",""),$("#fbalert"))}}(r[a],f))}else if(t){f.click(function(){t($(this).attr("id").replace("fbalert-",""),$("#fbalert"))})}else{f.click(function(){fbalert_close()})}f.text(r[a]["name"]);s.append(f)}}else{var f=$(document.createElement("div")).attr("id","fbalert-ok").attr("class","fbalert-button fbalert-button-primary").text("OK");if(t){f.click(function(){t($(this).attr("id").replace("fbalert-",""),$("#fbalert"))})}else{f.click(function(){fbalert_close()})}s.append(f)}var l=function(e){var t=0;var n=($(window).innerWidth()-i.width())/2-parseInt(i.css("paddingLeft"));if(typeof e=="undefined"){t=document.body.scrollTop+$(window).innerHeight()/2-i.height()/2-parseInt(i.css("paddingTop"))}else{t=e.scrollTop-e.offsetTop+e.clientHeight/2-i.height()/2-parseInt(i.css("paddingTop"))}i.css("top",t+"px");i.css("left",n+"px");i.fadeIn("fast")};if(typeof FB=="undefined"||i.hasClass("no-fb")){l()}else{window.fbalert_timeout=setTimeout(function(){l();i.addClass("no-fb")},200);FB.Canvas.getPageInfo(function(e){clearTimeout(window.fbalert_timeout);l(e)})}}function fbalert_close(){$("#fbalert").fadeOut("fast")}